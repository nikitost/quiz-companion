
# QuizCompanion — веб-приложение для проведения тестов и квизов
# Техническое задание v1.1
_Может содержать следы ИИ, орехов, сои, и других аллергенов (:_


## 1. Цель проекта
Разработать веб-приложение для работы в браузере, позволяющее преподавателями/ведущим (_далее Host’ам_) дополнить свой рабочий процесс и быстро создавать тесты/квизы для проведения их в двух режимах: индивидуальном (в самостоятельном темпе для самоподготовки) и групповом (управляемом Host’ом в режиме реального времени). Приложение должно поддерживать различные типы вопросов, совместное тестирование в реальном времени и базовую систему управления доступом.


## 2. Пользовательские роли

| Роль          | Описание                                                         | Аутентификация                                               |
|---------------|------------------------------------------------------------------|--------------------------------------------------------------|
| **Host**      | Создаёт и редактирует тест-комнаты и вопросы, управляет сессиями | Обязательная: oAuth                                          |
| **Player**    | Участвует в тестах по ссылке, вводит временный ник               | Не требуется (в будущем — опционально, по желанию участника) |
| **Assistant** | Запускает и проводит тесты для участников, но не редактирует их  | Обязательная: oAuth                                          |


## 3. Функциональные требования

### 3.1. Управление аккаунтом

#### Host
- Регистрация и авторизация с использованием OAuth.
- Возможность просмотра и управления своими тест-комнатами (см. п. 3.3).

#### Assistant
- Регистрация и авторизация с использованием OAuth.
- Возможность просмотра и запуска доверенных групповых тест-комнат (см. п. 3.3; п.3.4(B)).

### 3.2. Создание и управление вопросами
Поддерживаются следующие типы вопросов:
1. **Один правильный ответ** из списка вариантов.
2. **Несколько правильных ответов** из списка.
3. **Сопоставление** (drag-and-drop или выбор пар):  
   - От 2 до 30 пар.  
   - Все элементы должны быть использованы, т.е. лишних элементов нет.
4. **Письменный ответ**:  
   - Настройка максимальной длины текста (настраивает Host).  
   - Автопроверка по ключевым словам (с возможностью ручной коррекции Host’ом после завершения).
5. **Пустой бланк**: отображение текста и одной прикреплённой картинки (без интерактива).

> - Вопросы должны быть редактируемыми.
> - Host может смотреть созданные собой вопросы и переиспользовать их в новых тестах.
> - Предусмотреть возможность делать вопросы и ответы к ним публичными, чтобы другие Host'ы могли их переиспользовать.
> - Публичный вопрос, скопированный и измененный другим хостом - создается как копия.
> - Предусмотреть возможность подобрать к скопированному вопросу как существующие ответы, так и изменить их.
> - Измененные ответы содаются как копии.
> - Для всех типов вопросов предусмотреть возможность прикрепить до 10 изображений.
> - Предусмотреть опции "ручная нумерация изображений" и "нумеровать изображения при выводе".
> - Предусмотреть возможность перевода и показа вопросов на разных языках

### 3.3. Tест-комнаты
- Комната — это контейнер из вопросов и базовых настроек*, имеет уникальную ссылку и QR-код этой ссылки.
- Host может создавать неограниченное число комнат.
- После запуска группового режима содержимое комнаты нельзя изменять.
- При любом изменении содержимого комнаты (до запуска) — она клонируется, старая помечается как устаревшая и недоступна по новой ссылке.
- После завершения теста у Host'а есть возможность скорректировать балл за ложноотрицательный ответ.

> - Настройки комнаты:
> - Текущий режим (см. п. 3.4), по умолчанию индивидуальный.
> - Участник видит правильный ответ после каждого вопроса (вкл/выкл), по умолчанию выкл.
> - Участник видит правильный ответ после завершения теста (вкл/выкл), по умолчанию вкл.

### 3.4. Режимы работы комнаты

#### A. Индивидуальный (асинхронный)
- Player заходит по ссылке, проходит тест в своём темпе.
- Результат виден только ему.
- Нет синхронизации с другими участниками.
- Нет сохранения результата после закрытия, статистики.

#### B. Групповой (синхронный)
- Player заходит по ссылке + вводит временный ник.
- Host (Assistant) управляет ходом:
  - Запускает сессию.
  - Переключает текущий вопрос (все участники видят текущий активный вопрос в реальном времени).
  - Может установить таймер на вопрос (реализация как можно скорее после первичного MVP).
  - Завершает сессию.
- Host (Assistant) видит:
  - Список участников.
  - Прогресс ответов в реальном времени.
  - Окончательные результаты всех участников после завершения.
- Участники видят:
  - Свой прогресс и результат в зависимости от настроек комнаты.

- Также есть рейтинг игроков в групповом режиме.
  - Расчитывается на основании скорости ответа и продолжительности цепочки 100%-правильных ответов).
  - Может быть выключен за ненадобностью.
  - Показывается в при завершении сессии участникам всех ролей.
  - Сохраняется в статистике завершенной сессии.

### 3.5. Доступ к комнате
- Каждая комната защищена 4-значным цифровым PIN-кодом.
- PIN вводится Player’ом при входе в комнату.
- Повторное участие одного и того же пользователя не ограничивается.

### 3.6. Импорт / экспорт
- Поддержка Moodle. У Host'а есть возможноть импортировать/экспортировать вопросы в систему Moodle.

### 3.7. Хранение данных
- Host имеет доступ к истории проведённых тестов к каждой комнате группового режима. Для будущих ролей - по факту определения прав.
- Данные не удаляются автоматически (комнаты «живут вечно»).
- Устаревшие версии комнат (после редактирования) мягко удаляются (не отображаются в интерфейсе, но могут быть восстановлены при необходимости).


## 4. Нефункциональные требования

| Категория                       | Требование                                                                                     |
|---------------------------------|------------------------------------------------------------------------------------------------|
| **Платформа**                   | Веб, SPA (Single Page Application)                                                             |
| **Языки**                       | Русский, английский                                                                            |
| **Работа в реальном времени**   | Групповой режим — через WebSocket или аналог (например, Firebase Realtime DB / Socket.IO)      |
| **Масштабируемость**            | Архитектура должна поддерживать добавление новых ролей и типов вопросов                        |
| **Тех. требования**             | _Не изучены, пусть это будет сюрпризом_                                                        |

## 5. Предполагаемые сценарии использования

### Сценарий 1: Преподаватель проводит викторину на занятии
1. Host создаёт и настраивает групповой режим комнаты с вопросами.
2. Host делится ссылкой и PIN с классом.
3. Host управляет ходом теста, контролирует ответы класса.
4. После завершения Host просматривает ответы, корректирует ложноотрицательные баллы (предполагается их наличие в письменных типах ответов).

### Сценарий 2: Организатор мероприятия проводит квиз после доклада или во время праздника и т.д.
1. Host создаёт квиз.
2. Гости заходят по ссылке, вводят PIN.
3. Host ведёт игру в реальном времени, переключая вопросы.
4. Player'ы видят свой счёт - лидер объявляется устно.

### Сценарий 3: Преподаватель даёт тест в качестве домашнего задания для самопроверки качества выученных знаний
1. Host создаёт тест под индивидуальный режим.
2. Host делится ссылкой и PIN с классом.
3. Player'ы в удобное для них время проходят тесты и самостоятельно фиксируют свои пробелы.

### Сценарий 4: Преподаватель сразу проводит урок вокруг этой системы
1. Host создаёт тест под групповой или индивидуальный режим.
2. Host делится ссылкой и PIN с классом, если был выбран групповой режим.
3. Host проводит занятие, всё время находясь в этой системе.
  3.1. Показывает на карточках-бланках примеры задач, формулы, текст для чтения.
  3.2. После ряда пустых бланков переключает на вопросы, участники отвечают в устной форме выбирая искомый ответ, или индивидуально, если это режим группового теста.
> - _Данный сценарий может быть полезен на простых занятиях, например, по английскому языку для задач чтения._
> - _Когда вычитывается ряд отрывков, и начинается блок теста по ним, затем снова ряд отрывков, и ещё один блок теста._


## 6. Требования к MVP
- Есть регистрация Host'ов.
- Поддержка создания, редактирования, удаления двух типов вопросов: один правильный ответ, несколько правильных ответов, пустой бланк.
- Поддержка создания, редактирования, удаления индивидуальных и групповых комнат.
- Возможность поделиться ссылкой и PIN на комнату.
- Управление сессией групповой комнаты (старт, переключение вопросов, завершение).
- Просмотр истории тестов для групповой комнаты.


## 7. Обобщенный план работ
- Проработать модель данных, связи.
- Реализовать RESTful API для работы с данными.
- Определиться с вариантом реализации группового режима.
- Добавить аутентификацию.
- Разработать минимально необходимые формы клиента (для проверки главного процесса от момента создания до проведения теста).
- Допустимо реализовывать формы непосредственно следом за реализованным блоком API.
- Добавить и доработать формы под все остальные типы вопросов.
- Добавить настройки таймеров в вопросы, рейтинг участников.
- Добавить поддержку импорта/экспорта вопросов в Moodle.
- Добавить поддержку перевода и отображения вопросов на англ/рус языках.
